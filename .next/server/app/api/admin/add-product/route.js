"use strict";(()=>{var e={};e.id=749,e.ids=[749],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71017:e=>{e.exports=require("path")},62328:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>h,requestAsyncStorage:()=>y,routeModule:()=>g,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>m,POST:()=>f});var o=r(49303),s=r(88716),i=r(60670),n=r(87568),p=r(87070);let d=require("fs/promises");var u=r(71017),c=r.n(u),l=r(20435);async function m(){await (0,n.Z)();let e=await l.Z.find({});return p.NextResponse.json({data:e})}async function f(e){await (0,n.Z)();let t=await e.formData(),r=t.get("title"),a=t.get("price"),o=t.get("offer"),s=t.get("amen"),i=t.get("desc"),u=t.get("image"),m=await u.arrayBuffer(),f=Buffer.from(m),g=c().join(process.cwd(),"public","uploads",u.name);try{await (0,d.writeFile)(g,f);let e=new l.Z({title:r,price:a,offer:o,amen:s,desc:i,image:`/uploads/${u.name}`});return await e.save(),p.NextResponse.json({response:"Successfully Uploaded",success:!0},{status:201})}catch(e){return console.log(e),p.NextResponse.json({success:!1},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/admin/add-product/route",pathname:"/api/admin/add-product",filename:"route",bundlePath:"app/api/admin/add-product/route"},resolvedPagePath:"C:\\Users\\dell\\Desktop\\Next_Resort\\resort_booking\\src\\app\\api\\admin\\add-product\\route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:v,serverHooks:x}=g,w="/api/admin/add-product/route";function h(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:v})}},49303:(e,t,r)=>{e.exports=r(30517)},87568:(e,t,r)=>{r.d(t,{Z:()=>o});let{default:a}=r(11185),o=async()=>{try{await a.connect(process.env.MONGO_URI),console.log("Database connected")}catch(e){console.log(e)}}},20435:(e,t,r)=>{r.d(t,{Z:()=>s});let{default:a}=r(11185),o=new a.Schema({title:{type:String,required:!0},desc:{type:String},price:{type:Number,required:!0},offer:{type:String},image:{type:String},amen:{type:[String],default:["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast"],set:function(e){return"string"==typeof e&&(e=e.split(",").map(e=>e.trim())),Array.from(new Set(["Ac","Greyser","Tv","Wi-Fi","Elevator","Break-fast",...e]))}}}),s=a.models.product||a.model("product",o)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,70],()=>r(62328));module.exports=a})();