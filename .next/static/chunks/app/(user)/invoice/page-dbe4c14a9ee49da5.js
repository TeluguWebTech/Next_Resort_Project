(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[304],{92586:function(e,t,o){Promise.resolve().then(o.t.bind(o,231,23)),Promise.resolve().then(o.bind(o,30309))},30309:function(e,t,o){"use strict";var n=o(57437),i=o(2265);t.default=e=>{let{userId:t}=e,[o,s]=(0,i.useState)(null),[r,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null);console.log("extractId:",t);let d=async()=>{try{let e=await fetch("https://next-resort-project.vercel.app/api/users/".concat(t)),o=await e.json();if(console.log("newData:",o),e.ok)s(o.data);else throw Error(o.message||"Failed to fetch invoice data")}catch(e){c(e.message),console.log(e)}finally{a(!1)}};if((0,i.useEffect)(()=>{d()},[]),r)return(0,n.jsx)("div",{children:"Loading..."});if(l)return(0,n.jsxs)("div",{children:["Error: ",l]});if(!o||!o.bookings)return(0,n.jsx)("div",{children:"No invoice data available"});let h=(e,t)=>{let o=new Date(e);return Math.ceil(Math.abs(new Date(t)-o)/864e5)},u=async e=>{if(window.confirm("Are you sure to delete this booking?"))try{let t=await fetch("https://next-resort-project.vercel.app/api/users/".concat(e),{method:"DELETE"}),o=await t.json();if(t.ok)s(t=>({...t,bookings:t.bookings.filter(t=>t._id!==e)})),console.log("Booking deleted:",o);else throw Error(o.message||"Failed to delete booking")}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking")}};return(0,n.jsxs)("div",{className:"invoice-container",children:[(0,n.jsxs)("h1",{children:["Username: ",o.username]}),o.bookings.length>0?o.bookings.map(e=>{let t=h(e.startDate,e.endDate),o=t*e.price;return(0,n.jsxs)("div",{className:"booking-item",children:[(0,n.jsx)("h3",{children:e.productName}),(0,n.jsxs)("p",{children:["Booking dates from ",e.startDate," to ",e.endDate]}),(0,n.jsxs)("p",{children:["Discount: ",e.offer,"%"]}),(0,n.jsxs)("p",{children:["Number of Days: ",t]}),(0,n.jsxs)("h4",{children:["Price per day: ",e.price]}),(0,n.jsxs)("h4",{children:["Total Amount: ",o]}),(0,n.jsx)("div",{align:"center",children:(0,n.jsx)("button",{onClick:()=>u(e._id),className:"deleteBtn",children:"Delete Booking"})})]},e._id)}):(0,n.jsx)("div",{className:"no-bookings",children:"No bookings available"})]})}}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=92586)}),_N_E=e.O()}]);